<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LG H&H 2025 Tech Fair - Interactive Space v3</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; cursor: crosshair; }
        canvas { display: block; }
        .ui-container, .label-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .label-container { z-index: 10; }

        /* --- í´ëŸ¬ìŠ¤í„° & ì´ëª¨ì§€ ë ˆì´ë¸” --- */
        .cluster-label { color: #fff; background: rgba(0, 20, 30, 0.7); padding: 5px 15px; border-radius: 20px; font-size: 20px; font-weight: bold; border: 1px solid; text-shadow: 0 0 5px #fff; }
        .cosmetics-label { border-color: #FF69B4; color: #FF69B4; }
        .household-label { border-color: #00CED1; color: #00CED1; }
        .health-label { border-color: #32CD32; color: #32CD32; }
        .emoji-label { font-size: 40px; cursor: pointer; pointer-events: all; transition: transform 0.2s; text-shadow: 0 0 15px #fff; }
        .emoji-label:hover { transform: scale(1.3); }

        /* --- ëª¨ë‹¬ ìŠ¤íƒ€ì¼ --- */
        .modal { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); justify-content: center; align-items: center; pointer-events: all; z-index: 200; }
        .modal-content { width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; background: #111; padding: 2em; border-radius: 10px; border: 1px solid #00ffdd; }
        .modal-content h2 { color: #00ffdd; margin-top: 0; }
        .modal-content ul, .modal-content ol { list-style: none; padding: 0; }
        .modal-content li { background: #222; margin-bottom: 1em; padding: 1em; border-radius: 5px; }
        .close-modal-btn { position: absolute; top: 15px; right: 25px; font-size: 2em; cursor: pointer; color: #aaa; transition: color 0.2s; }
        .close-modal-btn:hover { color: #fff; }
        #details-modal-content p { color: #ddd; line-height: 1.6; }
        .modal-button { display: block; width: 100%; padding: 1em; margin-top: 1.5em; background: #00ffdd; border: none; color: #000; font-size: 1em; font-weight: bold; cursor: pointer; border-radius: 5px; transition: background 0.3s; }
        .modal-button:hover { background: #fff; }

        /* --- ê¸°íƒ€ UI --- */
        #info { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 2em; background: rgba(0, 0, 0, 0.7); border-radius: 10px; text-align: center; pointer-events: all; border: 1px solid #00ffdd; z-index: 100;}
        #info h1 { margin-top: 0; color: #00ffdd; }
        #cart-button { position: absolute; bottom: 30px; right: 30px; padding: 1em; background: rgba(0, 255, 221, 0.8); border-radius: 50%; cursor: pointer; pointer-events: all; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; font-size: 1.5em; font-weight: bold; color: #000; transition: transform 0.3s; border: 2px solid rgba(255,255,255,0.5); z-index: 100;}
        #cart-button:hover { transform: scale(1.1); }
        #tooltip { position: absolute; display: none; background: rgba(0, 0, 0, 0.8); border: 1px solid #fff; padding: 10px; border-radius: 5px; color: #fff; z-index: 100;}
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    <div class="label-container" id="label-renderer-container"></div>

    <div class="ui-container">
        <div id="info">
            <h1>LG H&H 2025 Tech Fair</h1>
            <p>
                <b>ì´ë™:</b> í‚¤ë³´ë“œ (W/A/S/D) ë˜ëŠ” í™”ì‚´í‘œ<br>
                <b>ì‹œì  ë³€ê²½:</b> ë§ˆìš°ìŠ¤ ìš°í´ë¦­ + ë“œë˜ê·¸<br>
                <b>íƒí—˜:</b> í´ëŸ¬ìŠ¤í„° ì£¼ë³€ì˜ ì´ëª¨ì§€(ğŸ’„, ğŸ§¼ ë“±)ë¥¼ í´ë¦­í•˜ì„¸ìš”!
            </p>
            <button id="start-button">íƒí—˜ ì‹œì‘í•˜ê¸°</button>
        </div>

        <div id="cart-button" style="display: none;">0</div>

        <div id="details-modal" class="modal">
            <div id="details-modal-content" class="modal-content">
                <span id="close-details-modal" class="close-modal-btn">&times;</span>
                <h2 id="details-title"></h2>
                <p id="details-desc"></p>
                <button id="add-to-cart-btn" class="modal-button">í˜ì‹  ì €ì¥ì†Œì— ë‹´ê¸°</button>
            </div>
        </div>

        <div id="cart-modal" class="modal">
            <div class="modal-content">
                <span id="close-cart-modal" class="close-modal-btn">&times;</span>
                <h2>í˜ì‹  ì €ì¥ì†Œ & ë™ì„  ì•ˆë‚´</h2>
                <h3>ì €ì¥ëœ ê¸°ìˆ  ëª©ë¡</h3>
                <ul id="cart-list"></ul>
                <hr>
                <h3>ë‚˜ë§Œì˜ íƒí—˜ ì§€ë„ (ìµœì  ë™ì„ )</h3>
                <ol id="tour-guide"></ol>
            </div>
        </div>

    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.165.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.165.0/examples/jsm/",
                "@tweenjs/tween.js": "https://unpkg.com/@tweenjs/tween.js@23.1.2/dist/tween.esm.js"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { CSS2DRenderer, CSS2DObject } from 'three/addons/renderers/CSS2DRenderer.js';
        import TWEEN from '@tweenjs/tween.js';

        // --- ê¸°ë³¸ ì„¤ì • ë° ë Œë”ëŸ¬ ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);
        const labelRenderer = new CSS2DRenderer();
        labelRenderer.setSize(window.innerWidth, window.innerHeight);
        labelRenderer.domElement.style.position = 'absolute';
        labelRenderer.domElement.style.top = '0px';
        document.getElementById('label-renderer-container').appendChild(labelRenderer.domElement);

        // --- UI ìš”ì†Œ ---
        const infoDiv = document.getElementById('info');
        const startButton = document.getElementById('start-button');
        const cartButton = document.getElementById('cart-button');
        const detailsModal = document.getElementById('details-modal');
        const cartModal = document.getElementById('cart-modal');
        const closeDetailsModal = document.getElementById('close-details-modal');
        const closeCartModal = document.getElementById('close-cart-modal');
        let currentlySelectedItem = null;

        // --- Mock ë°ì´í„° (ì´ëª¨ì§€ ë° ìƒì„¸ ì„¤ëª… ì¶”ê°€) ---
        const techData = [
            { id: 1, category: 'í™”ì¥í’ˆ', emoji: 'ğŸ’„', title: 'AI ë”¥ëŸ¬ë‹ ì»¬ëŸ¬ë§¤ì¹­ íŒŒìš´ë°ì´ì…˜', desc: 'ì‚¬ìš©ìì˜ í”¼ë¶€í†¤ì„ 0.1ì´ˆ ë§Œì— ìŠ¤ìº”í•˜ì—¬ ìˆ˜ì²œê°œì˜ ì»¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ì™€ ë§¤ì¹­, ì™„ë²½í•œ ìƒ‰ìƒì˜ íŒŒìš´ë°ì´ì…˜ì„ ì¦‰ì„ì—ì„œ ì œì¡°í•˜ëŠ” í˜ì‹  ê¸°ìˆ ì…ë‹ˆë‹¤.', location: 'A-01'},
            { id: 2, category: 'í™”ì¥í’ˆ', emoji: 'âœ¨', title: 'ë‚˜ë…¸-ë¦¬í¬ì¢€ ë¹„íƒ€ë¯¼C ì•ˆì •í™” ê¸°ìˆ ', desc: 'ë¹›ê³¼ ì—´ì— ì‰½ê²Œ íŒŒê´´ë˜ëŠ” ìˆœìˆ˜ ë¹„íƒ€ë¯¼Cë¥¼ ë‚˜ë…¸ ë¦¬í¬ì¢€ ìº¡ìŠì— ë‹´ì•„ ì•ˆì •ì„±ì„ 200% í–¥ìƒì‹œí‚¤ê³  í”¼ë¶€ ê¹Šìˆ™ì´ ì „ë‹¬í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.', location: 'A-02'},
            { id: 3, category: 'í™”ì¥í’ˆ', emoji: 'ğŸŒ¿', title: 'ì œì£¼ ë¹„ìë¦¼è‹” í™œìš© í•­ë…¸í™” ì†Œì¬', desc: 'ê°•ì¸í•œ ìƒëª…ë ¥ì„ ì§€ë‹Œ ì œì£¼ ë¹„ìë¦¼ì˜ ì´ë¼(è‹”)ì—ì„œ ìƒˆë¡œìš´ í•­ì‚°í™” ë° ì£¼ë¦„ê°œì„  ê¸°ëŠ¥ì„± ì†Œì¬ë¥¼ ë°œê²¬, ìƒìš©í™”ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.', location: 'A-03'},
            { id: 4, category: 'ìƒí™œìš©í’ˆ', emoji: 'ğŸ§¼', title: 'ë¯¸ì„¸í”Œë¼ìŠ¤í‹± Zero ì„¸ì • ê¸°ìˆ ', desc: 'ìì—°ì—ì„œ 100% ìƒë¶„í•´ë˜ëŠ” ì‹ë¬¼ ìœ ë˜ ì…€ë£°ë¡œì˜¤ìŠ¤ ìŠ¤í¬ëŸ½ì„ ê°œë°œí•˜ì—¬, ë°”ë‹¤ë¥¼ ì˜¤ì—¼ì‹œí‚¤ëŠ” ë¯¸ì„¸í”Œë¼ìŠ¤í‹±ì„ ì™„ë²½í•˜ê²Œ ëŒ€ì²´í•©ë‹ˆë‹¤.', location: 'B-01'},
            { id: 5, category: 'ìƒí™œìš©í’ˆ', emoji: 'ğŸŒ¬ï¸', title: 'ê°ì • ë¶„ì„ ìŠ¤ë§ˆíŠ¸ ë””í“¨ì €', desc: 'ì‹¤ë‚´ ì¹´ë©”ë¼ê°€ ì‚¬ìš©ìì˜ í‘œì •ì„ ë¶„ì„í•˜ì—¬, í˜„ì¬ ê°ì •ì— ë§ëŠ” ìµœì ì˜ ì•„ë¡œë§ˆ í–¥ê¸°ë¥¼ ìë™ìœ¼ë¡œ ë¶„ì‚¬í•˜ëŠ” IOT ë””í“¨ì € ì‹œìŠ¤í…œì…ë‹ˆë‹¤.', location: 'B-02'},
            { id: 6, category: 'ìƒí™œìš©í’ˆ', emoji: 'ğŸ’§', title: 'ì´ˆê³ ë†ì¶• ì•¡ìƒ ì„¸ì œ í¬ë®¬ëŸ¬', desc: 'ê¸°ì¡´ ëŒ€ë¹„ 1/3ì˜ ì–‘ë§Œìœ¼ë¡œë„ ë™ì¼í•œ ì„¸ì²™ë ¥ì„ ë°œíœ˜í•˜ëŠ” ì´ˆê³ ë†ì¶• í¬ë®¬ëŸ¬ë¥¼ ê°œë°œ, í”Œë¼ìŠ¤í‹± ì‚¬ìš©ëŸ‰ê³¼ íƒ„ì†Œë°°ì¶œëŸ‰ì„ íšê¸°ì ìœ¼ë¡œ ì¤„ì˜€ìŠµë‹ˆë‹¤.', location: 'B-03'},
            { id: 7, category: 'ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ', emoji: 'ğŸ’Š', title: 'ê°œì¸ ë§ì¶¤í˜• 3D í”„ë¦°íŒ… ì˜ì–‘ì œ', desc: 'ì‚¬ìš©ìì˜ ê±´ê°•ê²€ì§„ ë°ì´í„° ë° ìœ ì „ì ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, í•„ìš”í•œ ì˜ì–‘ì†Œë§Œ ì •í™•í•œ í•¨ëŸ‰ìœ¼ë¡œ ì¡°í•©í•˜ì—¬ 3D í”„ë¦°í„°ë¡œ ì¶œë ¥í•˜ëŠ” ë§ì¶¤ ì˜ì–‘ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.', location: 'C-01'},
            { id: 8, category: 'ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ', emoji: 'ğŸ’ª', title: 'ë§ˆì´í¬ë¡œë°”ì´ì˜´ ê¸°ë°˜ ê·¼ë ¥ê°œì„  ìœ ì‚°ê· ', desc: 'ì¥ë‚´ ë¯¸ìƒë¬¼(ë§ˆì´í¬ë¡œë°”ì´ì˜´)ì´ ê·¼ìœ¡ ìƒì„±ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë¶„ì„í•˜ì—¬, ê·¼ë ¥ ê°œì„ ì— íŠ¹í™”ëœ í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤ ê· ì£¼ë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤.', location: 'C-02'},
            { id: 9, category: 'ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ', emoji: 'ğŸ˜´', title: 'ê°íƒœ ì¶”ì¶œë¬¼ í™œìš© ìˆ˜ë©´ ì˜ì–‘ì œ', desc: 'ì œì£¼ ì²­ì • í•´ì—­ì˜ ê°íƒœì—ì„œ ì¶”ì¶œí•œ í”Œë¡œë¡œíƒ„ë‹Œ ì„±ë¶„ì´ ìˆ˜ë©´ì˜ ì§ˆì„ ê°œì„ í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ê·œëª…í•˜ê³ , ì´ë¥¼ ì œí’ˆí™”í•˜ì˜€ìŠµë‹ˆë‹¤.', location: 'C-03'},
            { id: 10, category: 'í™”ì¥í’ˆ', emoji: 'â˜€ï¸', title: 'í•˜ì´ë¸Œë¦¬ë“œ ìì™¸ì„  ì°¨ë‹¨ ì‹ ì†Œì¬', desc: 'ìœ ê¸°ìì°¨ì˜ ë°œë¦¼ì„±ê³¼ ë¬´ê¸°ìì°¨ì˜ ì•ˆì •ì„±ì„ ëª¨ë‘ ê°–ì¶˜ ì‹ ê°œë… í•˜ì´ë¸Œë¦¬ë“œ ìì™¸ì„  ì°¨ë‹¨ ì†Œì¬ë¥¼ ê°œë°œ, í”¼ë¶€ ìê·¹ì„ ìµœì†Œí™”í–ˆìŠµë‹ˆë‹¤.', location: 'A-04'},
        ];

        // --- í´ëŸ¬ìŠ¤í„° ë° ë°°ê²½ ìƒì„± ---
        const clusterInfo = { 'í™”ì¥í’ˆ': { position: new THREE.Vector3(-150, 20, -200), color: 0xFF69B4 }, 'ìƒí™œìš©í’ˆ': { position: new THREE.Vector3(150, -20, -200), color: 0x00CED1 }, 'ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ': { position: new THREE.Vector3(0, 50, -350), color: 0x32CD32 } };
        const starGeometry = new THREE.SphereGeometry(1500, 64, 64);
        const starMaterial = new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/starry-night.jpg'), side: THREE.BackSide });
        const starSphere = new THREE.Mesh(starGeometry, starMaterial);
        scene.add(starSphere);
        for (const [name, info] of Object.entries(clusterInfo)) {
            const light = new THREE.PointLight(info.color, 5000, 300);
            light.position.copy(info.position);
            scene.add(light);
            const div = document.createElement('div');
            div.className = `cluster-label ${name==='í™”ì¥í’ˆ'?'cosmetics-label':name==='ìƒí™œìš©í’ˆ'?'household-label':'health-label'}`;
            div.textContent = name;
            const label = new CSS2DObject(div);
            label.position.copy(info.position);
            label.position.y += 40;
            scene.add(label);
        }

        // --- ì´ëª¨ì§€ ë„¤ë¹„ê²Œì´ì…˜ í¬ì¸íŠ¸ ë° í¬ìŠ¤í„° ìƒì„± ---
        techData.forEach(data => {
            // 1. ìµœì¢… ëª©ì ì§€ê°€ ë  (ë³´ì´ì§€ ì•ŠëŠ”) í¬ìŠ¤í„° ìƒì„±
            const posterGeometry = new THREE.PlaneGeometry(15, 20);
            const posterMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 }); // ì•ˆë³´ì´ê²Œ
            const poster = new THREE.Mesh(posterGeometry, posterMaterial);
            const center = clusterInfo
